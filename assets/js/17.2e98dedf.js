(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{198:function(t,e,a){},265:function(t,e,a){"use strict";var s=a(198);a.n(s).a},319:function(t,e,a){"use strict";a.r(e);a(91),a(18);var s=a(22),c=a.n(s),i=a(56),n=a.n(i),l={data:function(){return{articleInfo:{},articles:[],selectIndex:0}},created:function(){var t=this,e=this.$route.query.id;c.a.get("".concat(this.API_PREFIX,"/api/project/addPv?id=").concat(e)).then(function(t){}).catch(function(t){return console.log(t)}),c.a.post("".concat(this.API_PREFIX,"/api/project/getProjectDetail"),n.a.stringify({id:e,token:window.localStorage.getItem("token")})).then(function(e){if((e=e.data).success&&e.model[0]){var a=e.model[0].files;t.articleInfo=e.model[0],t.articles=JSON.parse(a)}}).catch(function(t){return console.log(t)})},methods:{select:function(t){this.selectIndex=t},handleCollect:function(){var t=this;c.a.post("".concat(this.API_PREFIX,"/api/project/handleCollect"),n.a.stringify({id:this.$route.query.id,token:window.localStorage.getItem("token")})).then(function(e){(e=e.data).success?(t.articleInfo.isCollect?t.$set(t.articleInfo,"star",t.articleInfo.star-1):t.$set(t.articleInfo,"star",t.articleInfo.star+1),t.$set(t.articleInfo,"isCollect",!t.articleInfo.isCollect)):e.success||"not login"!==e.message||(location.href="".concat(t.API_PREFIX,"/api/github/login"))}).catch(function(t){return console.log(t)})},formatFilename:function(t){return-1!==t.indexOf(".")?t.split(".")[0]:t}}},o=(a(265),a(1)),r=Object(o.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("ul",{staticClass:"c-sidebar"},t._l(t.articles,function(e,s){return a("li",{key:s,class:[t.selectIndex===s?"active":null],on:{click:function(e){return t.select(s)}}},[t._v(t._s(t.formatFilename(e.filename)))])}),0),t.articles.length>0?a("div",{staticClass:"c-content"},[a("div",{staticClass:"c-header"},[a("h3",[t._v(t._s(t.formatFilename(t.articles[t.selectIndex].filename)))]),a("div",{staticClass:"info"},[a("a",{staticClass:"user-github",attrs:{href:"https://github.com/"+t.articleInfo.login,target:"_blank"}},[a("img",{staticClass:"avatar",attrs:{src:t.articleInfo.photo,width:"20",height:"20"}}),a("span",{staticClass:"user-name"},[t._v(t._s(t.articleInfo.login))])]),a("span",[t._v(t._s(t.articleInfo.createdAt))]),a("span",{staticClass:"icon-wrap"},[a("img",{attrs:{src:"/community-eye.svg",width:"16"}}),a("span",{staticClass:"num"},[t._v(t._s(t.articleInfo.pv))]),t._v("浏览")])]),a("div",{staticClass:"action"},[t.articleInfo.isWriter?a("a",{staticClass:"edit btn",attrs:{href:t.articleInfo.prefix+"/"+t.articleInfo.login+"/"+t.articleInfo.name,target:"_blank"}},[t._v("编辑")]):t._e(),a("span",{staticClass:"collect btn",on:{click:t.handleCollect}},[a("img",{staticClass:"star",attrs:{src:t.articleInfo.isCollect?"/community-collect-blue.svg":"/community-collect.svg",width:"14"}}),t._v("收藏"),a("span",{staticClass:"num"},[t._v(t._s(t.articleInfo.star))])])])]),a("div",{staticClass:"md"},[a("div",{staticClass:"text",domProps:{innerHTML:t._s(t.marked(t.articles[t.selectIndex].source))}})])]):t._e()])},[],!1,null,"0cb8f317",null);e.default=r.exports}}]);